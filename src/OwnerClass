

import java.util.*;
import java.io.File;  // Import the File class
import java.io.IOException;  // Import the IOException class to handle errors
import java.io.FileWriter;   // Import the FileWriter class
import java.io.FileNotFoundException;  // Import this class to handle errors

public class OwnerClass extends PropertyClass {
	private int id;
	private  String name;
	private  int age;
	private List<PropertyClass> properties=new ArrayList<PropertyClass>();
	
	public OwnerClass() {
		
	}
	public OwnerClass(int ownerId,String ownerName,int ownerAge) {
		this.id = ownerId;
		this.name = ownerName;
		this.age = ownerAge;
	}
	public void registerProperty() {
		String [] data = new String[100];
		//set for getting input values
        Scanner sc= new Scanner(System.in);
        //for random values.
        Random rand = new Random();
        String address,postCode,location;
        double marketValue;
        System.out.println("Property Owner:");
        this.name = sc.nextLine();
        System.out.println("Address:");
        address = sc.nextLine();     
        System.out.println("PostCode/EirCode:");
        postCode = sc.nextLine();
        System.out.println("Market Value:");
        marketValue = sc.nextDouble();
        System.out.println("Location Category:");        
        location = sc.nextLine();
        location = sc.nextLine();
        this.properties.add(new PropertyClass(address,postCode,marketValue,location));
        //System.out.println(this.properties.get(0).getLocationCategory());
          
	  
	  
        //Reading a file
        int i=0;
	      try {
	      File myObj = new File("data.txt");
	      Scanner myReader = new Scanner(myObj);
	      while (myReader.hasNextLine()) {
	        data[i] = myReader.nextLine();	 
	        i++;
	      }
	      myReader.close();
	    } catch (FileNotFoundException e) {
	      System.out.println("An error occurred.");
	      e.printStackTrace();
	    }
	      
	    data[i] = this.name+","+this.properties.get(0).getAddress()+","+this.properties.get(0).getEirCode()+","+this.properties.get(0).getValue()+","+
	    			this.properties.get(0).getLocationCategory()+"\n";
	      
	      
	      //writing in the file
        try {
            FileWriter myWriter = new FileWriter("data.txt");
            for(int j=0;j<=i;j++) {
            	myWriter.write(data[j]);
            }
            
            myWriter.close(); 
            System.out.println("Property is regsitered sucessfully");
          } catch (IOException e) {
            System.out.println("An error occurred.");
            e.printStackTrace();
          }
          return;        
	}
	
	public void unRegisterProperty() {
		String line;
		//set for getting input values
        Scanner sc= new Scanner(System.in);
        //for random values.
        Random rand = new Random();
        String owner,postCode,address;
        System.out.println("Enter Property Details you want to unregister:");
        System.out.println("Property Owner:");
        owner = sc.next();
        System.out.println("PostCode/EirCode:");   
        postCode = sc.next();
        System.out.println("Address:");
        address = sc.next();
        
        String own="";
        String add = "";
        String postCd = "";
        int indexer = 0;
	int pionter = 0;
        //Reading a file
	      try {	    	  
	    	  int index = 0,runner = 0;
	      File myObj = new File("data.txt");
	      Scanner myReader = new Scanner(myObj);
	      while (myReader.hasNextLine()) {
	        line = myReader.nextLine();
	        index = 0;
		runner = 0;
		
	        for(int k=0;k<line.length();k++) {
	        	if(index < 3) {	        		
	        		if(line.charAt(k)==44) {
	        			if(index==0) {
	        				own = line.substring(0,k);			        		
	        			}		        		
		        		if(index==1) {
		        			add = line.substring(runner,k);			        		
		        		}
		        		if(index==2) {
		        			postCd = line.substring(runner,k);			        		
			        		break;
		        		}
		        		runner = k+1;
		        		index++;
		        	}	        		
	        	}	        	
	        }	  
	        if(owner.equals(own)&&postCode.equals(postCd)&&address.equals(add)) {
	        	pointer = indexer;
	        	break;
	        }
	       indexer++;      
	      }
	      myReader.close();
	    } catch (FileNotFoundException e) {
	      System.out.println("An error occurred.");
	      e.printStackTrace();
	    }
	      
	      
	      
	      //------------------------------
	    String[] newData = new String[100];
	    
	    int g=0,r=0,inputRunner = 0;
	    //Reading a file
	      try {
	      File myObj = new File("data.txt");
	      Scanner myReader = new Scanner(myObj);
	      while (myReader.hasNextLine()) {
	    	if(r!=pointer) {
	    		newData[g] = myReader.nextLine()+"\n";	    		
	    		inputRunner = g;	    		
	    		g++;
	    	}
	    	else {
	    		myReader.nextLine();
	    	}
	    	
	    	r++;     
	      }
	      myReader.close();
	    } catch (FileNotFoundException e) {
	      System.out.println("An error occurred.");
	      e.printStackTrace();
	    }	
	    
	      if(inputRunner>0) {
	    	//writing in the file
	          try {
	              FileWriter myWriter = new FileWriter("data.txt");
	              for(int j=0;j<=inputRunner;j++) {
	              	myWriter.write(newData[j]);
	              }
	              
	              myWriter.close(); 
	              System.out.println("Property is unregistered successfully.");
	            } catch (IOException e) {
	              System.out.println("An error occurred.");
	              e.printStackTrace();
	            }  
	      }	    
	     
       
	}
	
	public void viewPorperties() {
			String line;
	       String own="";
	        String add = "";
	        String postCd = "";
	        String value = "";
	        String location = "";	
	        int checker = 0;
	        //Reading a file        
		      try {	    	  
		    	  int index = 0,runner = 0;
		      File myObj = new File("data.txt");
		      Scanner myReader = new Scanner(myObj);
		      while (myReader.hasNextLine()) {
		        line = myReader.nextLine();
		        index = 0;
		        runner = 0;
		        for(int k=0;k<line.length();k++) {
		        	if(index < 4) {	        		
		        		if(line.charAt(k)==44) {
		        			if(index==0) {
		        				own = line.substring(0,k);			        		
		        			}		        		
			        		if(index==1) {
			        			add = line.substring(runner,k);			        		
			        		}
			        		if(index==2) {
			        			postCd = line.substring(runner,k);				        		
			        		}
			        		if(index==3) {
			        			value = line.substring(runner,k);   			
			        		}			        					        		
			        		runner = k+1;
			        		index++;
			        	}	        	
		        		if(index==4) {
		        			location = line.substring(runner,line.length());			        			
		        			break;
		        		}
		        	}	        	
		        }
		        checker++;
		        System.out.println("Property Number: "+checker+"\nOwner Name: "+own+"\nAddress: "+add+"\nPost Code : "+postCd+"\nMarket Value: "+value+"\nLocation Category: "+location);
		      }
		      myReader.close();
		    } catch (FileNotFoundException e) {
		      System.out.println("An error occurred.");
		      e.printStackTrace();
		    }
	}
	
	public void balanceSheet() {
		String line;
		String salesId="";	
        String payment = "";                
        //Reading a file        
	      try {	    	  
	    	  int index = 0,runner = 0;
	      File myObj = new File("paymentRecord.txt");
	      Scanner myReader = new Scanner(myObj);
	      while (myReader.hasNextLine()) {
	        line = myReader.nextLine();
	        index = 0;
	        runner = 0;
	        for(int k=0;k<line.length();k++) {
	        	if(index < 6) {	        		
	        		if(line.charAt(k)==44) {
	        			if(index==0) {
	        				salesId = line.substring(0,k);			        		
	        			}	        			
		        		runner = k+1;
		        		index++;
		        	}	        	
	        		if(index==6) {
	        			payment = line.substring(runner,line.length());			        			
	        			break;
	        		}
	        	}	        	
	        }	        
	        System.out.println("\nSales Id: "+salesId+"\nPayment: "+payment);
	      }
	      myReader.close();
	    } catch (FileNotFoundException e) {
	      System.out.println("An error occurred.");
	      e.printStackTrace();
	    }
	}

	public int getAge() {
		return age;
	}

	public void setAge(int age) {
		this.age = age;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public int getId() {
		return id;
	}

	public void setId(int id) {
		this.id = id;
	}

	public List<PropertyClass> getProperties() {
		return properties;
	}

	public void setProperties(List<PropertyClass> properties) {
		this.properties = properties;
	}


}
